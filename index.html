<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Face Analysis & Hair Recommendations</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <div class="container">
        <h1>Upload Your Photo</h1>
        <input type="file" id="imageInput">
        <button id="analyzeBtn">Analyze</button>

        <h2>Analysis Result</h2>
        <pre id="result"></pre>

        <h2>Recommended Haircuts</h2>
        <ul id="recommendations"></ul>
    </div>

    <script>
        const analyzeBtn = document.getElementById('analyzeBtn');
        const imageInput = document.getElementById('imageInput');
        const resultPre = document.getElementById('result');
        const recommendationsUl = document.getElementById('recommendations');

        analyzeBtn.addEventListener('click', async () => {
            if (!imageInput.files[0]) {
                alert('Please select an image first');
                return;
            }

            const formData = new FormData();
            formData.append('image', imageInput.files[0]);

            const response = await fetch('/analyze', {
                method: 'POST',
                body: formData
            });

            const data = await response.json();
            resultPre.textContent = JSON.stringify(data.analysis, null, 2);

            recommendationsUl.innerHTML = '';
            if (data.recommendations) {
                data.recommendations.forEach(r => {
                    const li = document.createElement('li');
                    li.textContent = `${r.name} - ${r.reason}`;
                    recommendationsUl.appendChild(li);
                });
            }
        });
    </script>
</body>
</html>
